import{m as f}from"./VAvatar-c949dc11.js";import{_ as g}from"./_plugin-vue_export-helper-c27b6911.js";import{V as _,a as V,c as x}from"./VCard-6c0ec275.js";import{r as w,o as p,c as u,a as s,w as a,b as i,i as c,e as l,t as m,M as v}from"./main-a0f635ce.js";import{V as b}from"./VTextField-62b0c032.js";import{V as k}from"./VDialog-59cdd517.js";import{V as D}from"./VChip-c2c4b442.js";import{V as T}from"./VTooltip-06e35bf4.js";import"./VImg-ce066be5.js";import"./VInput-872f54a1.js";import"./index-5b9673f5.js";import"./VOverlay-98a581b7.js";import"./dialog-transition-762e9cc7.js";const C={data(){return{userUuid:this.$route.params.userUuid,filePath:this.$filePath,userProfile:{},detailHistory:!1,searchValue:"",items:[],headers:[{text:"Nama File",value:"name",sortable:!0},{text:"File",value:"path",sortable:!0},{text:"Terakhir dilihat",value:"latest_view",sortable:!0},{text:"Operation",value:"operation"}],itemsHistory:[],headersHistory:[{text:"File",value:"file.name",sortable:!0},{text:"Dilihat",value:"startTime",sortable:!0},{text:"Lama Waktu",value:"timespent",sortable:!0}]}},methods:{formatDate(o){return new Date(o).toLocaleString("id-ID")},async openModal(o){try{const e=new FormData;e.append("uuid",this.userProfile.uuid),e.append("fileid",o),e.append("_method","POST");const d=await f.post("/listhistoryfilebyuser",e);d.status===200?(this.itemsHistory=d.data.data,this.detailHistory=!0):this.$showToast("error","Sorry",d.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}},goBack(){this.$router.go(-1)},async getListFile(o){try{const e=await f.get(`/fileviewbyuser/${o}`);e.status===200?(this.items=e.data.data.fileList,this.userProfile=e.data.data.detailUser):this.$showToast("error","Sorry",e.data.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}}},mounted(){this.getListFile(this.userUuid)}},H={class:"d-flex justify-end mb-6"},P={class:"d-flex align-center pe-2 w-25"},F={key:0},L={key:1},S=i("p",null,"Data Kosong",-1),U=i("p",null,"Data Kosong",-1),B=i("p",null,"loading data .....",-1),N=["href"],E={class:"operation-wrapper"},I={class:"d-flex justify-space-between"},M=["onClick"];function j(o,e,d,K,r,n){const h=w("EasyDataTable");return p(),u("div",null,[s(_,{class:"auth-card pa-4 pt-5"},{default:a(()=>[s(V,{class:"align-left"},{default:a(()=>[i("span",{color:"primary",onClick:e[0]||(e[0]=(...t)=>n.goBack&&n.goBack(...t)),style:{cursor:"pointer"}},[s(c,{icon:"bx-arrow-back",color:"primary",tag:"back",start:""}),l(" Back ")]),s(x,{class:"text-2xl font-weight-bold"},{default:a(()=>[l(" List File Akses User : "+m(r.userProfile.name??"-"),1)]),_:1})]),_:1}),i("div",H,[i("div",P,[s(b,{"prepend-inner-icon":"mdi-magnify",density:"compact",label:"Search","single-line":"",flat:"","hide-details":"",variant:"solo-filled",modelValue:r.searchValue,"onUpdate:modelValue":e[1]||(e[1]=t=>r.searchValue=t)},null,8,["modelValue"])])]),s(k,{modelValue:r.detailHistory,"onUpdate:modelValue":e[2]||(e[2]=t=>r.detailHistory=t),width:"100%"},{default:a(()=>[s(_,null,{title:a(()=>[l(" Riwayat ")]),text:a(()=>[s(h,{"show-index":"",headers:r.headersHistory,items:r.itemsHistory},{"item-startTime":a(t=>[l(m(n.formatDate(t.startTime)),1)]),"item-timespent":a(t=>[t.timespent!=null?(p(),u("span",F,m(t.timespent)+" second ",1)):(p(),u("span",L," -- "))]),"empty-message":a(()=>[S]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),s(h,{"show-index":"",headers:r.headers,items:r.items,"search-value":r.searchValue},{"empty-message":a(()=>[U]),loading:a(()=>[B]),"item-path":a(t=>[i("a",{href:r.filePath+t.path,target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer !important"}},[s(D,{color:"primary"},{default:a(()=>[s(c,{start:"",icon:"mdi-file"}),l(" lihat ")]),_:1})],8,N)]),"item-latest_view":a(t=>[l(m(n.formatDate(t.latest_view)),1)]),"item-operation":a(t=>[i("div",E,[i("div",I,[s(T,{location:"top",text:"Lihat Detail"},{activator:a(({props:y})=>[i("button",v(y,{onClick:O=>n.openModal(t.id)}),[s(c,{size:"20",icon:"bx-file-find"})],16,M)]),_:2},1024)])])]),_:1},8,["headers","items","search-value"])]),_:1})])}const te=g(C,[["render",j]]);export{te as default};
