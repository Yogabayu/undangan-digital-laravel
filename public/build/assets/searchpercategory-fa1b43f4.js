import{m as y}from"./VAvatar-c949dc11.js";import{O as F,Z as B,P as N,aH as $,_ as R,ai as D,aJ as E,$ as I,R as L,S as j,T as U,U as G,a3 as M,a4 as O,a2 as z,aM as A,a5 as H,al as J,aO as X,a6 as Z,X as q,a as e,o as c,c as C,w as a,b as n,i as V,e as p,t as m,d as K,V as h,h as d,E as Q,f as _,G as W,F as Y}from"./main-a0f635ce.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import{V as x,c as ae,b as te,a as se,e as oe}from"./VCard-6c0ec275.js";import{V as le}from"./VForm-12a536ad.js";import{V as b}from"./VContainer-3ba9b957.js";import{V as f,a as r}from"./VRow-dcc804f1.js";import{V as re}from"./VTextField-62b0c032.js";import{V as ie}from"./VImg-ce066be5.js";import"./VInput-872f54a1.js";import"./index-5b9673f5.js";/* empty css              */const ne=F({color:String,...B(),...N(),...$(),...R(),...D(),...E(),...I(),...L(),...j()},"VSheet"),S=U()({name:"VSheet",props:ne(),setup(t,s){let{slots:k}=s;const{themeClasses:v}=G(t),{backgroundColorClasses:o,backgroundColorStyles:i}=M(O(t,"color")),{borderClasses:l}=z(t),{dimensionStyles:g}=A(t),{elevationClasses:u}=H(t),{locationStyles:w}=J(t),{positionClasses:T}=X(t),{roundedClasses:P}=Z(t);return q(()=>e(t.tag,{class:["v-sheet",v.value,o.value,l.value,u.value,T.value,P.value,t.class],style:[i.value,g.value,w.value,t.style]},k)),{}}}),ce={data(){return{idCat:this.$route.params.categoryId,files:[],category:{},selectedName:""}},methods:{goBack(){this.$router.go(-1)},toDetail(t){this.$router.push(`/u-filedetail/${t}`)},async getFileSearch(){try{let t="/user/search?";this.selectedName!==null&&(t+=`name=${this.selectedName}`),t+=(this.selectedName!==null?"&":"")+`category=${this.category.id}`;const s=await y.get(t);s.status===200?this.files=s.data.data:this.$showToast("error","Sorry",s.data.data.message)}catch(t){this.$showToast("error","Sorry",t.data.data.message)}},async favorite(t){try{const s=await y.get(`/user/setfavfile/${t}`);s.status===200?(this.getFile(this.idCat),this.$showToast("success","Success",s.data.message)):(this.getFile(this.idCat),this.$showToast("error","Sorry",s.data.message))}catch(s){this.$showToast("error","Sorry",s.response.data.message)}},async getFile(t){try{const s=await y.get(`/user/category/${t}`);s.status===200?(this.category=s.data.data.category,this.files=s.data.data.files,console.log(s.data)):this.$showToast("error","Sorry",s.data.data.message)}catch(s){this.$showToast("error","Sorry",s.data.data.message)}}},mounted(){this.getFile(this.idCat)}},de=n("span",{class:"subtitle-1"},"Getting Data ...",-1),ue=n("span",{class:"subtitle-1"},"Tidak ada file yang ditemukan",-1),me=n("span",{class:"caption"},"Silahkan coba lagi",-1),he={class:"text-overline mb-1"},fe={class:"text-h6 mb-1"},ge={class:"text-caption"};function ye(t,s,k,v,o,i){return c(),C("div",null,[e(x,{class:"auth-card pa-4 pt-5"},{default:a(()=>[e(ae,{class:"text-2xl font-weight-bold"},{default:a(()=>[n("span",{color:"primary",onClick:s[0]||(s[0]=(...l)=>i.goBack&&i.goBack(...l)),style:{cursor:"pointer"}},[e(V,{icon:"bx-arrow-back",color:"primary",tag:"back",start:""}),p(" Back ")]),p(" Cari File dengan kategori : "+m(o.category.name??"-"),1)]),_:1}),e(te,null,{default:a(()=>[e(le,{onSubmit:K(i.getFileSearch,["prevent"])},{default:a(()=>[e(b,null,{default:a(()=>[e(f,{"no-gutters":""},{default:a(()=>[e(r,{cols:"12",sm:"8"},{default:a(()=>[e(S,{class:"ma-2 pa-2"},{default:a(()=>[e(re,{placeholder:"Cari File",autofocus:"",modelValue:o.selectedName,"onUpdate:modelValue":s[1]||(s[1]=l=>o.selectedName=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{cols:"12",sm:"2"},{default:a(()=>[e(S,{class:"ma-2 pa-2 d-flex justify-center"},{default:a(()=>[e(h,{class:"ma-2",variant:"text",icon:"mdi-magnify",color:"#5865f2",type:"submit"})]),_:1})]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(f,null,{default:a(()=>[o.files==null?(c(),d(r,{key:0,cols:"12",md:"12"},{default:a(()=>[e(f,{class:"text-center"},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(Q,{indeterminate:"",color:"primary"})]),_:1}),e(r,{cols:"12"},{default:a(()=>[de]),_:1})]),_:1})]),_:1})):_("",!0),o.files!=null&&o.files.length==0?(c(),d(r,{key:1,cols:"12",md:"12"},{default:a(()=>[e(f,{class:"text-center"},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(V,{size:"64",color:"grey lighten-2"},{default:a(()=>[p("mdi-folder-search-outline")]),_:1})]),_:1}),e(r,{cols:"12"},{default:a(()=>[ue]),_:1}),e(r,{cols:"12"},{default:a(()=>[me]),_:1})]),_:1})]),_:1})):_("",!0),o.files!=null&&o.files.length>0?(c(!0),C(W,{key:2},Y(o.files,(l,g)=>(c(),d(r,{key:g,cols:"12",md:"6"},{default:a(()=>[e(x,{class:"mx-auto card-style",color:"primary",variant:"tonal",height:"230px","max-width":"344",hover:""},{default:a(()=>[e(ie,{src:"https://bankarthaya.com/wp-content/uploads/2023/07/desktop-1024x576-1.jpg",height:"20px",cover:""}),e(se,null,{default:a(()=>[n("div",null,[n("div",he,m(o.category.name),1),n("div",fe,m(l.name.substring(0,20)+"..."),1),n("div",ge,m(l.summary.substring(0,30)+"..."),1)])]),_:2},1024),e(oe,{class:"d-flex justify-end"},{default:a(()=>[e(h,{class:"ma-2",variant:"text",icon:"mdi-open-in-new",color:"blue-lighten-2",onClick:u=>i.toDetail(l.id)},null,8,["onClick"]),l.favorite==1?(c(),d(h,{key:0,class:"ma-2",variant:"text",icon:"mdi-heart",color:"blue-lighten-2",onClick:u=>i.favorite(l.id)},null,8,["onClick"])):(c(),d(h,{key:1,class:"ma-2",variant:"text",icon:"mdi-heart-outline",color:"blue-lighten-2",onClick:u=>i.favorite(l.id)},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):_("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})])}const Fe=ee(ce,[["render",ye]]);export{Fe as default};
