import{m as p}from"./VAvatar-c949dc11.js";import{m as $,r as D,o as A,c as B,a as o,w as t,e as m,b as r,V as g,d as F,t as c,K as h,L as f,i as V}from"./main-a0f635ce.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{V as v,a as S,c as I}from"./VCard-6c0ec275.js";import{V as u}from"./VTextField-62b0c032.js";import{V as y}from"./VDialog-59cdd517.js";import{V as k}from"./VForm-12a536ad.js";import{V as U,a as s}from"./VRow-dcc804f1.js";import{V as d}from"./VSelect-9ae2ff64.js";import{V as C}from"./VFileInput-209624d0.js";import{V as b}from"./VTooltip-06e35bf4.js";import"./VImg-ce066be5.js";import"./VInput-872f54a1.js";import"./index-5b9673f5.js";import"./VOverlay-98a581b7.js";import"./dialog-transition-762e9cc7.js";/* empty css              */import"./VMenu-10fdde58.js";import"./VChip-c2c4b442.js";const z=$({watch:{"dataForm.email":function(e){e!==""?this.emailRules=[a=>a.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||"Invalid Email address"]:e===""&&(this.emailRules=[])}},data(){return{emailRules:[],rules:{required:e=>!!e||"Required"},photoUrl:this.$userPhotoUrl,dataForm:{name:"",email:"",password:null,nik:null,uuid:null,photo:null,position_id:null,isActive:1,isAdmin:0,canDownload:null,canPrint:1,canComment:null},items:[],headers:[{text:"Nama",value:"name",sortable:!0},{text:"Photo",value:"photo",sortable:!0},{text:"NIK",value:"nik",sortable:!0},{text:"Email",value:"email",sortable:!0},{text:"Jabatan",value:"position",sortable:!1},{text:"Operation",value:"operation"}],positions:[],searchValue:"",searchField:["name","nik","email","posision.name"],insert:!1,btnInsert:!0,isPasswordVisible:!1,edit:!1}},methods:{toUserDevice(e){this.$router.push(`/a-deviceuser/${e.uuid}`)},async insertData(){try{for(let i in this.dataForm)i!=="uuid"&&this.dataForm[i]===null&&(this.closeModal(1),this.$showToast("error","Sorry",`Properti ${i} harus diisi.`));const e=new FormData;for(let i in this.dataForm)i!=="uuid"&&e.append(i,this.dataForm[i]);e.append("_method","POST");const a=await p.post("/user-add",e,{headers:{"Content-Type":"multipart/form-data"}});a.status===200?(this.closeModal(1),this.getAllUser(),this.$showToast("success","Success",a.data.message)):this.$showToast("error","Sorry",a.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}},async updateData(){try{const e=new FormData;for(let i in this.dataForm)this.dataForm[i]!==null&&e.append(i,this.dataForm[i]);e.append("_method","PUT");const a=await p.post("/updateUserProfile",e,{headers:{"Content-Type":"multipart/form-data"}});a.status===200?(this.closeModal(2),this.getAllUser(),this.$showToast("success","Success",a.data.message)):this.$showToast("error","Sorry",a.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}},openModal(e,a=null){e===1?(this.insert=!0,this.getPositions()):e===2&&a&&(this.resetForm(),this.getPositions(),this.dataForm.name=a.name,this.dataForm.email=a.email,this.dataForm.nik=a.nik,this.dataForm.uuid=a.uuid,this.dataForm.position_id=a.position_id,this.dataForm.isActive=parseInt(a.isActive),this.dataForm.isAdmin=parseInt(a.isAdmin),this.dataForm.canDownload=parseInt(a.canDownload),this.dataForm.canPrint=parseInt(a.canPrint),this.dataForm.canComment=parseInt(a.canComment),this.edit=!0)},handlePhotoChange(e){const a=e.target.files[0];a&&["image/jpeg","image/png","image/webp"].includes(a.type)?this.dataForm.photo=a:(this.$showToast("error","Error","Hanya file JPEG atau PNG yang diizinkan."),e.target.value=null)},resetForm(){this.dataForm={name:"",email:"",password:null,nik:null,uuid:null,photo:null}},closeModal(e){e===1?(this.resetForm(),this.insert=!1):e===2&&(this.resetForm(),this.edit=!1)},async getPositions(){try{const e=await p.get("/position");e.status===200?this.positions=e.data.data.map(a=>({value:a.id,title:a.name})):this.$showToast("error","Sorry","error get data position")}catch{this.$showToast("error","Sorry","error get data position")}},async deleteUser(e){try{if(!window.confirm("Apakah Anda yakin ingin menghapus pengguna?"))return;const i=await p.delete(`/user-delete/${e.uuid}`);i.status===200?(this.getAllUser(),this.$showToast("success","Berhasil",i.data.message)):this.$showToast("error","Sorry",i.data.message)}catch(a){this.$showToast("error","Sorry",a.response.data.message)}},async getAllUser(){try{const e=await p.get("/all-user");e.status===200?this.items=e.data.data:this.$showToast("error","Sorry",e.data.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}},async resetPassword(e){try{const a=await p.get(`/reset-password/${e.uuid}`);a.status===200?this.$showToast("success","Berhasil",a.data.message):this.$showToast("error","Sorry",a.data.data.message)}catch(a){this.$showToast("error","Sorry",a.response.data.message)}}},mounted(){this.getAllUser()}}),N={class:"d-flex justify-space-between mb-6"},E={class:"d-flex align-center pe-2 w-25"},M=r("p",null,"Data User Kosong",-1),R=r("p",null,"loading data .....",-1),q={class:"player-wrapper"},j=["src","alt"],J={class:"operation-wrapper"};function K(e,a,i,L,G,H){const P=D("EasyDataTable");return A(),B("div",null,[o(v,{class:"auth-card pa-4 pt-5"},{default:t(()=>[o(S,{class:"align-left"},{default:t(()=>[o(I,{class:"text-2xl font-weight-bold"},{default:t(()=>[m(" User Profile ")]),_:1})]),_:1}),r("div",N,[o(g,{color:"primary",size:"small",class:"my-3 mx-3",onClick:a[0]||(a[0]=l=>e.openModal(1))},{default:t(()=>[m(" Tambah Data ")]),_:1}),r("div",E,[o(u,{"prepend-inner-icon":"mdi-magnify",density:"compact",label:"Search","single-line":"",flat:"","hide-details":"",variant:"solo-filled",modelValue:e.searchValue,"onUpdate:modelValue":a[1]||(a[1]=l=>e.searchValue=l)},null,8,["modelValue"])])]),o(y,{modelValue:e.insert,"onUpdate:modelValue":a[13]||(a[13]=l=>e.insert=l),width:"auto"},{default:t(()=>[o(v,null,{title:t(()=>[m(" Tambah Data ")]),text:t(()=>[o(k,{onSubmit:F(e.insertData,["prevent"])},{default:t(()=>[o(U,null,{default:t(()=>[o(s,{md:"6",cols:"12"},{default:t(()=>[o(u,{placeholder:"John",label:"Nama",modelValue:e.dataForm.name,"onUpdate:modelValue":a[2]||(a[2]=l=>e.dataForm.name=l),autofocus:"",rules:[e.rules.required],"prepend-icon":"mdi-person"},null,8,["modelValue","rules"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(u,{label:"E-mail",placeholder:"johndoe@gmail.com",type:"email","prepend-icon":"mdi-mail",modelValue:e.dataForm.email,"onUpdate:modelValue":a[3]||(a[3]=l=>e.dataForm.email=l),rules:e.emailRules},null,8,["modelValue","rules"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(u,{label:"NIK",modelValue:e.dataForm.nik,"onUpdate:modelValue":a[4]||(a[4]=l=>e.dataForm.nik=l),type:"number","prepend-icon":"mdi-passport",rules:[e.rules.required]},null,8,["modelValue","rules"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(u,{modelValue:e.dataForm.password,"onUpdate:modelValue":a[5]||(a[5]=l=>e.dataForm.password=l),rules:[e.rules.required],"prepend-icon":"mdi-lock",label:"Password",placeholder:"············",type:e.isPasswordVisible?"text":"password","append-inner-icon":e.isPasswordVisible?"bx-hide":"bx-show","onClick:appendInner":a[6]||(a[6]=l=>e.isPasswordVisible=!e.isPasswordVisible)},null,8,["modelValue","rules","type","append-inner-icon"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(d,{label:"Jabatan",items:e.positions,modelValue:e.dataForm.position_id,"onUpdate:modelValue":a[7]||(a[7]=l=>e.dataForm.position_id=l),rules:[e.rules.required],"prepend-icon":"mdi-divide"},null,8,["items","modelValue","rules"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(d,{label:"Status Akun",items:[{value:1,title:"Aktif"},{value:0,title:"Non-aktif"}],modelValue:e.dataForm.isActive,"onUpdate:modelValue":a[8]||(a[8]=l=>e.dataForm.isActive=l),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(d,{label:"Level Akun",items:[{value:1,title:"Admin"},{value:0,title:"User"}],modelValue:e.dataForm.isAdmin,"onUpdate:modelValue":a[9]||(a[9]=l=>e.dataForm.isAdmin=l),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(d,{label:"Izin download?",items:[{value:1,title:"Diizinkan"},{value:0,title:"Dilarang"}],modelValue:e.dataForm.canDownload,"onUpdate:modelValue":a[10]||(a[10]=l=>e.dataForm.canDownload=l),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(d,{label:"Izin Comment?",items:[{value:1,title:"Diizinkan"},{value:0,title:"Dilarang"}],modelValue:e.dataForm.canComment,"onUpdate:modelValue":a[11]||(a[11]=l=>e.dataForm.canComment=l),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(C,{accept:"image/png, image/jpeg, image/webp",placeholder:"Pick an photo","prepend-icon":"mdi-camera",rules:[e.rules.required],label:"Photo",onChange:e.handlePhotoChange},null,8,["rules","onChange"])]),_:1}),o(s,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[o(g,{type:"submit"},{default:t(()=>[m("Simpan")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[12]||(a[12]=l=>e.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),o(y,{modelValue:e.edit,"onUpdate:modelValue":a[25]||(a[25]=l=>e.edit=l),width:"auto"},{default:t(()=>[o(v,null,{title:t(()=>[m(" Update Data ")]),text:t(()=>[o(k,{class:"mt-6",onSubmit:F(e.updateData,["prevent"])},{default:t(()=>[o(U,null,{default:t(()=>[o(s,{md:"6",cols:"12"},{default:t(()=>[o(u,{placeholder:"John",label:"Nama",modelValue:e.dataForm.name,"onUpdate:modelValue":a[14]||(a[14]=l=>e.dataForm.name=l),autofocus:"","prepend-icon":"mdi-person"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(u,{label:"E-mail",placeholder:"johndoe@gmail.com",type:"email","prepend-icon":"mdi-mail",modelValue:e.dataForm.email,"onUpdate:modelValue":a[15]||(a[15]=l=>e.dataForm.email=l),rules:e.emailRules},null,8,["modelValue","rules"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(u,{label:"NIK",modelValue:e.dataForm.nik,"onUpdate:modelValue":a[16]||(a[16]=l=>e.dataForm.nik=l),type:"number","prepend-icon":"mdi-passport"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(u,{modelValue:e.dataForm.password,"onUpdate:modelValue":a[17]||(a[17]=l=>e.dataForm.password=l),"prepend-icon":"mdi-lock",label:"Password",placeholder:"············",type:e.isPasswordVisible?"text":"password","append-inner-icon":e.isPasswordVisible?"bx-hide":"bx-show","onClick:appendInner":a[18]||(a[18]=l=>e.isPasswordVisible=!e.isPasswordVisible)},null,8,["modelValue","type","append-inner-icon"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(d,{label:"Jabatan",items:e.positions,modelValue:e.dataForm.position_id,"onUpdate:modelValue":a[19]||(a[19]=l=>e.dataForm.position_id=l),"prepend-icon":"mdi-divide"},null,8,["items","modelValue"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(d,{label:"Status Akun",items:[{value:1,title:"Aktif"},{value:0,title:"Non-aktif"}],modelValue:e.dataForm.isActive,"onUpdate:modelValue":a[20]||(a[20]=l=>e.dataForm.isActive=l),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(d,{label:"Level Akun",items:[{value:1,title:"Admin"},{value:0,title:"User"}],modelValue:e.dataForm.isAdmin,"onUpdate:modelValue":a[21]||(a[21]=l=>e.dataForm.isAdmin=l),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(d,{label:"Izin download?",items:[{value:1,title:"Diizinkan"},{value:0,title:"Dilarang"}],modelValue:e.dataForm.canDownload,"onUpdate:modelValue":a[22]||(a[22]=l=>e.dataForm.canDownload=l),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(d,{label:"Izin Comment?",items:[{value:1,title:"Diizinkan"},{value:0,title:"Dilarang"}],modelValue:e.dataForm.canComment,"onUpdate:modelValue":a[23]||(a[23]=l=>e.dataForm.canComment=l),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),o(s,{cols:"12",md:"6"},{default:t(()=>[o(C,{accept:"image/png, image/jpeg, image/bmp",placeholder:"Pick an photo","prepend-icon":"mdi-camera",rules:[e.rules.required],label:"Photo",onChange:e.handlePhotoChange},null,8,["rules","onChange"])]),_:1}),o(s,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[o(g,{type:"submit"},{default:t(()=>[m("Update")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[24]||(a[24]=l=>e.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),o(P,{headers:e.headers,items:e.items,"search-field":e.searchField,"search-value":e.searchValue,"show-index":""},{"empty-message":t(()=>[M]),loading:t(()=>[R]),"item-photo":t(({photo:l,name:n})=>[r("div",q,[r("img",{class:"avator",src:e.photoUrl+l,alt:n,width:60},null,8,j)])]),"item-position":t(({position:l})=>[r("div",null,[r("p",null,c(l.name),1)])]),"item-division":t(({division:l})=>[r("div",null,[r("p",null,c(l.name),1)])]),"item-operation":t(l=>[r("div",J,[o(b,{location:"top",text:"Reset Password"},{activator:t(({props:n})=>[r("button",h(f(n)),[o(V,{size:"20",icon:"bx-reset",color:"#6c42f5",onClick:w=>e.resetPassword(l)},null,8,["onClick"])],16)]),_:2},1024),m("   "),o(b,{location:"top",text:"Lihat Device User"},{activator:t(({props:n})=>[r("button",h(f(n)),[o(V,{size:"20",icon:"bx-devices",color:"blue",onClick:w=>e.toUserDevice(l)},null,8,["onClick"])],16)]),_:2},1024),m("   "),o(b,{location:"top",text:"Edit User"},{activator:t(({props:n})=>[r("button",h(f(n)),[o(V,{size:"20",icon:"bx-edit",color:"#adad82",onClick:w=>e.openModal(2,l)},null,8,["onClick"])],16)]),_:2},1024),m("   "),o(b,{location:"top",text:"Hapus User"},{activator:t(({props:n})=>[r("button",h(f(n)),[o(V,{size:"20",icon:"bx-trash",color:"#f33",onClick:w=>e.deleteUser(l)},null,8,["onClick"])],16)]),_:2},1024)])]),_:1},8,["headers","items","search-field","search-value"])]),_:1})])}const ue=T(z,[["render",K]]);export{ue as default};
